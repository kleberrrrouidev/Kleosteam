<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Kleosteam - Meu Jogo</title>
  <link rel="stylesheet" href="/css/estilo.css"> <!-- Aproveita o CSS do site -->
  <style>
    .game-box {
      border: 3px solid #fff;
      margin: 20px auto;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px;
      width: fit-content;
    }
  </style>
</head>
<body>
  
  <!-- Cabe√ßalho padr√£o do Kleosteam -->
  <header>
    <h1>üéÆ Kleosteam - Sala de Jogos</h1>
    <nav>
      <a href="/">In√≠cio</a> |
      <a href="/jogos/">Todos os Jogos</a>
    </nav>
  </header>

  <main>
    <h2>üèÜ Multiplayer Local + Save Offline</h2>
    <p>Jogue aqui diretamente no navegador. Seu progresso fica salvo no seu dispositivo.</p>

    <!-- ‚ÄúBox‚Äù do jogo -->
    <div class="game-box">
      <canvas id="game-container" width="600" height="400"></canvas>
    </div>
  </main>

  <!-- Scripts do jogo -->
  <script src="https://unpkg.com/netplayjs@0.4.1/dist/netplay.js"></script>
  <script>
    // Fun√ß√µes de save local
    function salvarProgresso(fase, pontos) {
      localStorage.setItem("faseAtual", fase);
      localStorage.setItem("pontuacao", pontos);
    }
    function carregarProgresso() {
      return {
        fase: parseInt(localStorage.getItem("faseAtual")) || 1,
        pontos: parseInt(localStorage.getItem("pontuacao")) || 0
      };
    }

    // Jogo simples para exemplo
    class MeuJogo extends netplayjs.Game {
      constructor() {
        super();
        let save = carregarProgresso();
        this.pos = { x: 100, y: 100 };
        this.fase = save.fase;
        this.pontos = save.pontos;
      }
      tick(inputs) {
        for (const [player, input] of inputs.entries()) {
          let vel = input.arrowKeys();
          this.pos.x += vel.x * 5;
          this.pos.y -= vel.y * 5;
          this.pontos++;
          salvarProgresso(this.fase, this.pontos);
        }
      }
      draw(canvas) {
        let ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "red";
        ctx.fillRect(this.pos.x, this.pos.y, 20, 20);
        ctx.fillStyle = "white";
        ctx.fillText(`Fase: ${this.fase} | Pontos: ${this.pontos}`, 10, 20);
      }
    }
    MeuJogo.timestep = 1000 / 60;
    MeuJogo.canvas = document.getElementById("game-container");
    new netplayjs.RollbackWrapper(MeuJogo).start();
  </script>

</body>
</html>
